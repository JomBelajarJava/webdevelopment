
<!DOCTYPE HTML>
<html lang="ms" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Authorization Â· Belajar Web Development</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="Authorization ialah proses untuk memberi akses kepada ahli website. Kita akan menggunakan fungsi authorization daripada Spring Security.">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Burhanuddin Baharuddin">
        
        
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
     a=s.createElement(o),m=s.getElementsByTagName(o)[0];
     a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-64328787-1', 'auto');
</script>

    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../deployment/" />
    
    
    <link rel="prev" href="authentication.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Taip untuk search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Pengenalan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../asas/">
            
                <a href="../asas/">
            
                    
                    Asas
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../asas/setup-projek.html">
            
                <a href="../asas/setup-projek.html">
            
                    
                    Setup Projek
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../asas/run-projek.html">
            
                <a href="../asas/run-projek.html">
            
                    
                    Run Projek
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../asas/controller.html">
            
                <a href="../asas/controller.html">
            
                    
                    Controller
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../asas/routing.html">
            
                <a href="../asas/routing.html">
            
                    
                    Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../asas/request.html">
            
                <a href="../asas/request.html">
            
                    
                    Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../asas/response.html">
            
                <a href="../asas/response.html">
            
                    
                    Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../asas/autowire.html">
            
                <a href="../asas/autowire.html">
            
                    
                    Autowire
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../springmvc/">
            
                <a href="../springmvc/">
            
                    
                    Spring MVC
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../springmvc/template-engine.html">
            
                <a href="../springmvc/template-engine.html">
            
                    
                    Template Engine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../springmvc/controller-mvc.html">
            
                <a href="../springmvc/controller-mvc.html">
            
                    
                    Controller MVC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../springmvc/model.html">
            
                <a href="../springmvc/model.html">
            
                    
                    Model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../springmvc/mustache.html">
            
                <a href="../springmvc/mustache.html">
            
                    
                    Mustache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../springmvc/form.html">
            
                <a href="../springmvc/form.html">
            
                    
                    Form
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../springmvc/redirect.html">
            
                <a href="../springmvc/redirect.html">
            
                    
                    Redirect
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    Spring Security
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="password-hashing.html">
            
                <a href="password-hashing.html">
            
                    
                    Password Hashing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="csrf.html">
            
                <a href="csrf.html">
            
                    
                    CSRF
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="authentication.html">
            
                <a href="authentication.html">
            
                    
                    Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.4" data-path="authorization.html">
            
                <a href="authorization.html">
            
                    
                    Authorization
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../deployment/">
            
                <a href="../deployment/">
            
                    
                    Deployment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../deployment/uberjar.html">
            
                <a href="../deployment/uberjar.html">
            
                    
                    Uberjar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../deployment/paas.html">
            
                <a href="../deployment/paas.html">
            
                    
                    PaaS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../deployment/google-app-engine.html">
            
                <a href="../deployment/google-app-engine.html">
            
                    
                    Google App Engine
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Diterbitkan oleh GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Authorization</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="authorization">Authorization</h1>
<p>Dalam <a href="authentication.html">tutorial Authentication</a>, walaupun tidak log in,
pengguna masih boleh melayari page dashboard. Untuk menyekat akses pengguna yang
tidak log in, kita boleh menggunakan fungsi authorization daripada Spring
Security. Authorization ialah proses untuk memberi akses kepada ahli website.</p>
<p>Kita boleh configure authorization dalam method <code>configure()</code> sama seperti
authentication. Kita tambah seperti berikut:</p>
<pre><code class="lang-java">    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        http
                .formLogin()
                .loginPage(<span class="hljs-string">&quot;/login&quot;</span>)
                .defaultSuccessUrl(<span class="hljs-string">&quot;/dashboard&quot;</span>)
                .and()
                .logout()
                .and()
                .authorizeRequests()
                .antMatchers(<span class="hljs-string">&quot;/dashboard/**&quot;</span>).authenticated();
    }
</code></pre>
<p>Selepas configure authentication, kita panggil method <code>and()</code> untuk configure
bahagian lain dan pilih <code>authorizeRequests()</code> untuk configure authorization.
Kemudian kita menggunakan <code>antMatchers()</code> untuk memilih path mana yang perlu
disekat, jadi kita tulis <code>&quot;/dashboard/**&quot;</code> yang bermaksud mana-mana path yang
bermula dengan <code>/dashboard</code>. Kemudian kita panggil method <code>authenticated()</code>
untuk path tersebut menandakan hanya pengguna yang login sahaja yang boleh
akses.</p>
<p>Setelah selesai, anda boleh cuba logout, kemudian layari
<a href="https://localhost:8080/dashboard" target="_blank">https://localhost:8080/dashboard</a> dan website
akan redirect anda ke page login.</p>
<h2 id="role">Role</h2>
<p>Jika anda perhatikan dalam <a href="authentication.html">tutorial Authentication</a>, semasa
kita membuat pengguna untuk demo, kita ada meletakkan role. Semasa menggunakan
website, bukan semua ahli boleh akses ke semua page. Ada ahli yang berperanan
sebagai admin, ada yang ahli berbayar, dan ada ahli biasa. Maka kita boleh
menggunakan role untuk membezakan kumpulan-kumpulan ini.</p>
<p>Sekarang kita cuba membuat page yang khas untuk admin sahaja. Kandungan page
terpulang kepada anda. Controller untuk page adalah seperti berikut:</p>
<pre><code class="lang-java">    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">&quot;/admin&quot;</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">admin</span><span class="hljs-params">(Model model)</span> </span>{
        <span class="hljs-keyword">return</span> render(model, <span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;Admin&quot;</span>);
    }
</code></pre>
<p>Kita juga akan membuat satu lagi pengguna biasa untuk melihat sama ada dia boleh
mengakses page admin.</p>
<pre><code class="lang-java">        UserDetails admin = ...

        UserDetails pleb =
                User.withUsername(<span class="hljs-string">&quot;user&quot;</span>)
                        .password(<span class="hljs-string">&quot;password&quot;</span>)
                        .roles(<span class="hljs-string">&quot;USER&quot;</span>)
                        .passwordEncoder(passwordEncoder::encode)
                        .build();

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> InMemoryUserDetailsManager(admin, pleb);
</code></pre>
<p>Perhatikan role untuk pengguna tersebut berbeza dengan admin.</p>
<p>Untuk menyekat akses untuk page admin, kita boleh menambah path yang lain
menggunakan <code>antMatchers()</code> kemudian guna method <code>hasRole()</code>, seperti berikut:</p>
<pre><code class="lang-java">                ...
                .and()
                .authorizeRequests()
                .antMatchers(<span class="hljs-string">&quot;/dashboard/**&quot;</span>).authenticated()
                .antMatchers(<span class="hljs-string">&quot;/admin/**&quot;</span>).hasRole(<span class="hljs-string">&quot;ADMIN&quot;</span>);
                ...
</code></pre>
<p>Setelah selesai, cuba login sebagai pengguna biasa, dan layari
<a href="http://localhost:8080/admin" target="_blank">http://localhost:8080/admin</a> dan page akan
memaparkan &apos;<em>forbidden</em>&apos;.</p>
<p>Pengguna juga boleh memiliki lebih daripada satu role.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> carian untuk "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">Tiada hasil carian untuk "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="authentication.html" class="navigation navigation-prev " aria-label="Previous page: Authentication">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../deployment/" class="navigation navigation-next " aria-label="Next page: Deployment">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"date":"2018-12-09T00:00:00.000Z","description":"Authorization ialah proses untuk memberi akses kepada ahli website. Kita akan menggunakan fungsi authorization daripada Spring Security.","title":"Authorization","level":"1.4.4","depth":2,"next":{"title":"Deployment","level":"1.5","depth":1,"path":"deployment/README.md","ref":"deployment/README.md","articles":[{"title":"Uberjar","level":"1.5.1","depth":2,"path":"deployment/uberjar.md","ref":"deployment/uberjar.md","articles":[]},{"title":"PaaS","level":"1.5.2","depth":2,"path":"deployment/paas.md","ref":"deployment/paas.md","articles":[]},{"title":"Google App Engine","level":"1.5.3","depth":2,"path":"deployment/google-app-engine.md","ref":"deployment/google-app-engine.md","articles":[]}]},"previous":{"title":"Authentication","level":"1.4.3","depth":2,"path":"springsecurity/authentication.md","ref":"springsecurity/authentication.md","articles":[]},"dir":"ltr"},"config":{"plugins":["sitemap-general","pageload-analytics"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"sitemap-general":{"prefix":"https://www.jombelajarjava.com/webdevelopment/"},"pageload-analytics":{"token":"UA-64328787-1"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Burhanuddin Baharuddin","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Belajar Web Development","language":"ms","gitbook":"*"},"file":{"path":"springsecurity/authorization.md","mtime":"2018-12-11T19:41:25.974Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-12-11T23:53:56.175Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-pageload-analytics/track.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

